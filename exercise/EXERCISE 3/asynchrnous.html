<!DOCTYPE html>
<html lang='en'>
<head>
    <title>Asynchronous Example</title>
</head>
<body>
   <script>


function simulateDelay(ms){
        return new Promise((resolve) => {
            setTimeout(() => {
                console.log('waited for ${ms} ms');
                resolve();
            }, ms);
            });
            }

            
     function getPostUsingThen(postId){
        console.log("Loading");

        fetch("https://jsonplaceholder.typicode.com/posts/1")
        .then((response) => {
            if(!response.ok) {
                throw new Error('failed to fetch post');
            }
            return response.json(); //converts response to json
        })

        .then((data) => {
            console.log("post fetched successfully");
            console.log(data.title);
            console.log(data.body);
        })

        .catch((error) => {
            console.error("ERROR:",error.message);
        });
     }

     //asynchronous function call

     async function getPostUsingAsync(postId){
        try{
        const response = await fetch(`https://jsonplaceholder.typicode.com/posts/1`);

        if(!response.ok){
            throw new Error('failed to fetch post');
        }

        const data = await response.json();

        const upperTitle =data.title.toUpperCase();
        const wordcount = data.body.trim().split(/\s+/).length;

        console.log("Post fetched successfully");
        console.log("Title:", upperTitle);
        console.log("Word Count:", wordcount);
        } catch(error) {
            console.error("ERROR:", error.message);
        }
    }
    

    

     function loadPost(postId){
        simulateDelay(1000);
        getPostUsingThen(postId);
        getPostUsingAsync(postId);
        console.log("Finished!");
     }
     
     loadPost(1);
   </script>     